[
  {
    "objectID": "posts/mumbai-slums/index.html",
    "href": "posts/mumbai-slums/index.html",
    "title": "Getting GIS data of Mumbai slums",
    "section": "",
    "text": "According the 2011 census, around 42% of the population resides in slums [1]. Given the rapid rates of growth in a megacity like Mumbai, it’s likely that both the extent and the population of slum residents has only increased in the last decade. While the source of the GIS data is also several years old (circa 2015) [2], we can use it to understand the more about slums in the city. I have a long list of questions for quantitative understanding how slums are part of the urban fabric:\n\nSlum concentrations around the city?\nHow large are individual slums?\nHow big are slum clusters?\nWhat type of urban typologies exist between and next to slums?\nHow did slums evolve in various parts of the city?\n\nAlongside the quantitative aspects also come the qualitative: how did slums start, how do they continue despite such incredible difficulties of life and what is their future?\nLike many sources of data from India, the original data from the Slum Rehabilitation Authority (SRA) [2] is provided as a pdf map and a separate set of attributes also in pdf. This adds yet another item on my growing list of required R geospatial skills for urban analytics: converting pdf maps to digital shapefiles. However, I can defer this lesson for a little longer thanks to Opencity [3] who have digitised the map to a KML format that can be directly read in as an sf object.\nAs a first step, I’m trying to get a sense of the extent of slums across the city. I’ve added key natural areas (in green) since Mumbai has several wetland areas and a large national park within the city boundaries. Slums (in red) are mostly distributed in Mumbai suburban district of Mumbai with a few exceptions like the well-known slum of Dharavi at the northwestern boundary of Mumbai city district. Given the extensive spread of slums, understanding how they dovetail with middle class and upper class urban typologies will be a key focus of my future analysis.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nReferences\n\n\n[1] C. O. of India, “Mumbai (Greater Mumbai) City Population Census 2011-2023 | Maharashtra.” https://www.census2011.co.in/census/city/365-mumbai.html (accessed Feb. 10, 2023).\n\n\n[2] “GIS-MIS Slum Data : Slum Rehabilitation Authority (SRA).” https://sra.gov.in/pagem/innerpage/gis-mis-slum-data-marathi.php (accessed Feb. 06, 2023).\n\n\n[3] “Mumbai - Slum Cluster Map - Collections - OpenCity - Urban Data Portal.” https://data.opencity.in/dataset/mumbai-slum-cluster-map (accessed Feb. 11, 2023).\n\n\n\n\nCredits\n\nPost photo by Alfarnas Solkar on Unsplash"
  },
  {
    "objectID": "posts/mumbai-pop/index.html",
    "href": "posts/mumbai-pop/index.html",
    "title": "Population distribution in Mumbai",
    "section": "",
    "text": "Mumbai is a city of incredible heterogeneity and diversity. One of the many indicators of this aspect is how and where people live. To answer questions of where people live, we can either find census information per ward or other spatially resolved sources. Census information is unfortunately rather out of date, over 12 years old [1], so an alternative source is required.\nThe search led me to WorldPop [2] which provides population counts at a 100m\\(^2\\) spatial resolution. While the WorldPop estimates use clever statistical models for generating spatial distribution of population, the total for Mumbai comes to 13.38 million people as at 2020 [3]. This value is 25% lower than the recent 2023 population estimate of 17.2 million from the Indian government [1]. It is likely that the mismatch results from the Indian population being generated from a generic top-down model that covers the world while the Indian government has projected population using past trends in growth rates specific to the area.\nDespite low confidence in its accuracy, the WorldPop dataset was a good opportunity to learn how to wrangle raster data and to combine it with vector data. The population data from WorldPop covers the entire country so cropping to the Mumbai boundaries (full and by the two main districts) was required before any plotting or analysis. After some initial confusion over which package to use, I found that the R package stars [4] is a very convenient way to read raster data into R and the geom_stars geom allows for easy plotting with ggplot2. Usefully, st_crop also works out of the box when combining polygon sf objects with a stars object.\nSeparating the population counts for the two districts of Mumbai, draws attention apparent homogeneity of Mumbai city. This corresponds well to the more business-centric landuse of Mumbai city especially at the southern tip of Colaba. The northern and eastern areas of Mumbai suburban are significantly more populated than the city district, and are spatially congruous with extensive slum settlements though the population estimates smear out the higher density of slums beyond the expected slum limits.\n\n\n\n\n\n\nReferences\n\n\n[1] C. O. of India, “Mumbai (Greater Mumbai) City Population Census 2011-2023 | Maharashtra.” https://www.census2011.co.in/census/city/365-mumbai.html (accessed Feb. 10, 2023).\n\n\n[2] M. Bondarenko, D. Kerr, A. Sorichetta, and A. Tatem, “Census/projection-disaggregated gridded population datasets, adjusted to match the corresponding UNPD 2020 estimates, for 183 countries in 2020 using Built-Settlement Growth Model (BSGM) outputs.” University of Southampton, 2020. doi: 10.5258/SOTON/WP00685.\n\n\n[3] “The spatial distribution of population in 2020 with country total adjusted to match the corresponding UNPD estimate, india,” 2020. https://hub.worldpop.org/geodata/summary?id=49992\n\n\n[4] “Spatiotemporal Arrays, Raster and Vector Data Cubes.” https://r-spatial.github.io/stars/ (accessed Feb. 11, 2023).\n\n\n\n\nCredits\nPost photo by Harsh Kondekar on Unsplash"
  },
  {
    "objectID": "posts/osm-mumbai/index.html",
    "href": "posts/osm-mumbai/index.html",
    "title": "Building footprints for Mumbai",
    "section": "",
    "text": "I rely heavily on Openstreetmap (OSM) for my geospatial analyses as I mainly work with vector data of buildings and streets. However, OSM is not always reliable - with particularly large issues for cities in developing countries like Mumbai. From my recent investigations, OSM seems especially bad for building footprints in areas with informal settlements or changes within the last few years. To learn more, I’ve compared OSM with a recent dataset called GlobalML from Microsoft [1]. Instructions on downloading data from Global ML can be found in another blog post.\n\n\n\nI first started with comparing OSM and Google maps streetviews centered around the area I grew up in (Sector 2, Vashi). I could quickly see that many buildings were missing in the footprints data. Global ML corroborates this especially for areas with many small building footprints - likely informal settlements.\n\n\n\n\n\n\n\n\nThe situation is worse for known vast informal settlement areas like Shivaji Nagar in Eastern Mumbai suburban district. Here, OSM has not captured any building footprints but the whole area is densely built up! What’s even more fascinating is that this area has been built up for quite some time [2]. It would seem that OSM built environment polygons are not regularly maintained for Mumbai?\n\n\n\n\n\n\n\n\n\nReferences\n\n\n[1] Microsoft/GlobalMLBuildingFootprints. Microsoft, 2023. Accessed: Feb. 06, 2023. [Online]. Available: https://github.com/microsoft/GlobalMLBuildingFootprints\n\n\n[2] “Shivaji Nagar: Homegrown Neighbourhood | urbz,” Sep. 01, 2012. https://urbz.net/articles/shivaji-nagar-homegrown-neighbourhood (accessed Feb. 12, 2023)."
  },
  {
    "objectID": "posts/global-ml/index.html",
    "href": "posts/global-ml/index.html",
    "title": "Building footprints from Global ML",
    "section": "",
    "text": "I’ve recently learned of the GlobalML dataset from Microsoft [1] which has extracted building footprints from satellite imagery. However, accessing the data is not trivial as only a handful of countries have specific data releases. The rest of the world, including India, are available as compressed files and can be downloaded using the quadkey for the required map tile.\nThe challenge I faced was figuring out which quadkey tile contained the latitude and longitudes I was interested in. Luckily, I found a very useful snippet [2] that makes use of the pyquadkey2 python package.\n\npython3 -m pip install pyquadkey2\npython3\n\n\nfrom pyquadkey2 import quadkey\n\ndef geo_to_qk(latitude, longitude, zoom_level):\n    \"\"\"Convert latitude and longitude to quadkey at specified\n    integer  zoom level, returning quadkey as a string\n    \"\"\"\n    qk = str(quadkey.from_geo((latitude, longitude), zoom_level))\n    return qk\n\n# To get a 9 digit quadkey, the zoom level is 9\ngeo_to_qk(19.07403, 72.99571, 9)\n\n\n\n\n\n\n\nThe GlobalML data tiles are based on zoom level 9 so once I had the requisite quadkey (123300311), I just had to look up the file containing it in the data links csv, to get the following link: https://minedbuildings.blob.core.windows.net/global-buildings/2022-11-15/global-buildings.geojsonl/RegionName%3DIndia/quadkey%3D123300311/part-00055-2cb4a5ad-6652-48b0-a336-f09518f4c9e5.c000.csv.gz\nFor some unknown reason, the geojson file is saved as csv. So, once the csv.gz is downloaded and extracted, the file needs to be renamed from .csv to .geojson before being read into R with sf::st_read(). A quick visualisation shows that the tile gets footprints for Mumbai suburban district and the wider metropolitan region to the east. A different tile will be required for the Mumbai city district.\n\n\n\n\n\n\n\n\n\nReferences\n\n[1] Microsoft/GlobalMLBuildingFootprints. Microsoft, 2023. Accessed: Feb. 06, 2023. [Online]. Available: https://github.com/microsoft/GlobalMLBuildingFootprints\n\n\n[2] “How to Convert Latitude and Longitude to Quadkey for Easy Joins – Iggy Blog.” https://www.askiggy.com/blog/how-to-convert-latitude-and-longitude-to-quadkey-for-easy-joins (accessed Feb. 06, 2023)."
  },
  {
    "objectID": "posts/osmplotr/index.html",
    "href": "posts/osmplotr/index.html",
    "title": "Schematic maps of urban form",
    "section": "",
    "text": "I became interested in the qualitative and quantitative analysis of urban form over a year ago. Architects like Bimal Patel [1] dominate the vast literature of urban form and their classic set of explanatory images are 200m - 500m square schematics of building footprints, plots and street networks. However, there was no tutorial (that I could find) or even examples for creating these in R.\n\n\n\nAn example of comparative urban form schematics from [2].\n\n\nAfter some googling around for existing code or packages that would help me build the required schematics in a systematic way, I landed on the following franken-hack:\n\nSpecifying a bounding box with consistent extent based on a user specification. The code for this functionality was taken from spacey [3]. The functions get_centroid_bounding_box(), extract_coords(), rad_to_deg() and deg_to_rad() are needed. I keep them in a local R script since I don’t need the other functionality of spacey.\nUsing osmplotr [4] to pull specific spatial elements like parks, building networks and street works and print a visually consistent map. The handy make_osm_map() function both gets the data and outputs the map as a ggplot object. Colours can be set for the different structures in the map.\nUsing patchwork [5] to put together multiple ggplot2 objects for side by side comparison.\n\n\n# custom osmplotr function\nreturn_osmplotr_map <- function(bbox, map_title){\n  # get data\n  structs <- c (\"highway\", \"building\", \"park\", \"landuse\")\n  structures <- osm_structures (structures = structs, col_scheme = \"dark\")\n  structures$value [4] <- \"recreation_ground\"\n  structures$cols[4] <- \"#647864FF\"\n  \n  # make map\n  osmplotr_map <- make_osm_map(structures = structures, bbox = bbox)\n  plot <- osmplotr_map$map  + labs(title = map_title)\n  return(plot)\n}\n\n# bounding boxes and extend with spacey function\npc_bbox <- get_centroid_bounding_box(\n  c(\"lat\" = 19.01879, \"lng\" = 72.85141),\n  distance = 500,\n  dist.unit = \"m\") %>% \n  get_bbox()\n\nbe_bbox <- get_centroid_bounding_box(\n  c(\"lat\" = 18.93566, \"lng\" = 72.8401),\n  distance = 500,\n  dist.unit = \"m\") %>% \n  get_bbox()\n\n# return individual plot objects\np1 <- return_osmplotr_map(pc_bbox, \"Parsi Colony, Dadar (Mumbai City)\")\np2 <- return_osmplotr_map(be_bbox, \"Ballard Estate, Fort (Mumbai City)\")\n\n# Compose plot\n(p1 + theme(plot.margin = unit(c(0,5,0,0), \"pt\"))) + (p2) \n\n\n\n\n\n\n\nReferences\n\n\n[1] “Alain Bertaud, Bimal Patel, Vidyadhar Phatak on Improving Indian Urban Planning - YouTube.” https://www.youtube.com/watch?v=A0_qAk_obLE (accessed Aug. 06, 2022).\n\n\n[2] “What is urban fabric? – rethink urban,” Jun. 26, 2012. http://rethinkurban.com/2012/places-and-spaces/understanding-urban-forms/ (accessed Feb. 11, 2023).\n\n\n[3] “Spacey: Easily Obtain Spatial Data and Make Better Maps version 0.1.1 from CRAN.” https://rdrr.io/cran/spacey/ (accessed Feb. 11, 2023).\n\n\n[4] Ropensci/osmplotr. rOpenSci, 2022. Accessed: Aug. 11, 2022. [Online]. Available: https://github.com/ropensci/osmplotr\n\n\n[5] “The Composer of Plots.” https://patchwork.data-imaginist.com/ (accessed Feb. 11, 2023).\n\n\n\n\nCredits\n\nPost photo from https://www.architecturaldigest.in/story/dadar-parsi-colony-cherishing-the-bombay-that-was-mumbai-history-pictures/"
  },
  {
    "objectID": "posts/charming-mumbai/index.html",
    "href": "posts/charming-mumbai/index.html",
    "title": "Charming neighbourhoods of Mumbai",
    "section": "",
    "text": "One of the many stereotypes of Mumbai is that it is a city filled with abject poverty and slums wherever you look. While slums are a deeply intrinsic part of Mumbai’s urban reality, given their extensive spread, the city also has many beautiful spaces where people live and work amidst comfortable and beautiful urban environs. Here we look briefly at two such areas: the residential Parsi Colony in Dadar [1] and the business district of Ballard Estate in Fort [2].\n\n\n\n\n\n\nParsi colony\n\n\n\n\n\n\n\nBallard Estate\n\n\n\n\n\nBoth neighbourhoods are planned designs from the British era of the early twentieth century where buildings were designed accommodate the available plot of land. The urban skeletons of both neighbourhoods have a pleasing flow even within unusual plot shapes. Parsi Colony takes it further by incorporating green space in different shapes within the overall design.\nI’m particularly interested in understanding how people lived in and moved about these neighbourhoods and contrast it with my own lived experience within a very different neighbourhood in the urban sprawl of Navi Mumbai. So, my next set of readings is Boombay by Kamu Iyer which starts with the history, architecture and lived experience of Parsi Colony and nearby Hindy Colony [3].\n\n\n\n\n\n\n\n\n\nReferences\n\n\n[1] “Dadar Parsi Colony,” Wikipedia. Dec. 05, 2022. Accessed: Feb. 19, 2023. [Online]. Available: https://en.wikipedia.org/w/index.php?title=Dadar_Parsi_Colony&oldid=1125715992\n\n\n[2] “Ballard Estate,” Wikipedia. Dec. 01, 2022. Accessed: Feb. 19, 2023. [Online]. Available: https://en.wikipedia.org/w/index.php?title=Ballard_Estate&oldid=1124891716\n\n\n[3] K. Iyer, Boombay: From precincts to sprawl. Mumbai: Popular Prakashan, 2014."
  },
  {
    "objectID": "essays.html",
    "href": "essays.html",
    "title": "Essays",
    "section": "",
    "text": "Reasons to study urban morphology\n\n\n\n\n\n\n\ndata science\n\n\nurban morphology\n\n\n\n\n\n\n\n\n\n\n\nApr 15, 2023\n\n\nShrividya Ravi\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Blog",
    "section": "",
    "text": "Raster heights to building heights\n\n\n\n\n\n\n\ndata science\n\n\nurban\n\n\nlondon\n\n\nnew york city\n\n\nbuildings\n\n\nraster\n\n\n\n\n\n\n\n\n\n\n\nApr 1, 2023\n\n\nShrividya Ravi\n\n\n\n\n\n\n  \n\n\n\n\nOverlaying building heights and footprints\n\n\n\n\n\n\n\ndata science\n\n\nurban\n\n\nlondon\n\n\nbuildings\n\n\nraster\n\n\n\n\n\n\n\n\n\n\n\nMar 25, 2023\n\n\nShrividya Ravi\n\n\n\n\n\n\n  \n\n\n\n\nA first look at building heights data\n\n\n\n\n\n\n\ndata science\n\n\nurban\n\n\nlondon\n\n\nbuildings\n\n\n\n\n\n\n\n\n\n\n\nMar 19, 2023\n\n\nShrividya Ravi\n\n\n\n\n\n\n  \n\n\n\n\nLearning about figure-ground diagrams\n\n\n\n\n\n\n\nurban\n\n\nR\n\n\ndata science\n\n\nindia\n\n\nmumbai\n\n\nlondon\n\n\nnew york city\n\n\n\n\n\n\n\n\n\n\n\nMar 10, 2023\n\n\nShrividya Ravi\n\n\n\n\n\n\n  \n\n\n\n\nCharming neighbourhoods of Mumbai\n\n\n\n\n\n\n\ndata science\n\n\nurban\n\n\nindia\n\n\nmumbai\n\n\n\n\n\n\n\n\n\n\n\nFeb 19, 2023\n\n\nShrividya Ravi\n\n\n\n\n\n\n  \n\n\n\n\nGetting GIS data of Mumbai slums\n\n\n\n\n\n\n\ndata science\n\n\nurban\n\n\nindia\n\n\nmumbai\n\n\n\n\n\n\n\n\n\n\n\nFeb 1, 2023\n\n\nShrividya Ravi\n\n\n\n\n\n\n  \n\n\n\n\nBuilding footprints for Mumbai\n\n\n\n\n\n\n\ndata science\n\n\nurban\n\n\nindia\n\n\nmumbai\n\n\nbuildings\n\n\n\n\n\n\n\n\n\n\n\nFeb 1, 2023\n\n\nShrividya Ravi\n\n\n\n\n\n\n  \n\n\n\n\nBuilding footprints from Global ML\n\n\n\n\n\n\n\ndata science\n\n\nurban\n\n\nindia\n\n\nmumbai\n\n\nbuildings\n\n\n\n\n\n\n\n\n\n\n\nFeb 1, 2023\n\n\nShrividya Ravi\n\n\n\n\n\n\n  \n\n\n\n\nSchematic maps of urban form\n\n\n\n\n\n\n\ndata science\n\n\nurban\n\n\nindia\n\n\nmumbai\n\n\nR\n\n\n\n\n\n\n\n\n\n\n\nNov 1, 2022\n\n\nShrividya Ravi\n\n\n\n\n\n\n  \n\n\n\n\nPopulation distribution in Mumbai\n\n\n\n\n\n\n\ndata science\n\n\nurban\n\n\nindia\n\n\nmumbai\n\n\n\n\n\n\n\n\n\n\n\nAug 1, 2022\n\n\nShrividya Ravi\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Shrividya Ravi",
    "section": "",
    "text": "Shrividya is a Principal Data Analyst at Te Manatū Waka (Ministry of Transport) in New Zealand. Her main blog and website can be found here. This site is dedicated to learning urbanism through practice - mainly in R but also some Python. The blog is a repository of raw thoughts and short technical lessons while essays are pieces with a little more heft and consideration. Everything here is my own personal opinion.\n \n  \n   \n  \n    \n     twitter\n  \n  \n    \n     Github"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "e-flaneur",
    "section": "",
    "text": "References"
  },
  {
    "objectID": "posts/figure-ground/index.html",
    "href": "posts/figure-ground/index.html",
    "title": "Learning about figure-ground diagrams",
    "section": "",
    "text": "When I wrote my earlier posts on urban form schematics (see here and here), I was unaware that they are known as figure-ground diagrams - whose main purpose is to highlight built and unbuilt space. The contrast is also referred to as the mass vs. the void or, the figure vs. the ground. Only buildings are included in the conventional version - resulting in a stark mosaic of black and white that allows for a bird’s eye analysis of urban form and structures. Note, I have reversed the colour scheme from my other posts to follow the common style of figure-ground diagrams.\nSquare mile comparisons of different urban areas (or the same area across time) feature extensively in the book Great Streets by Allan Jacobs [1] according to [2] but I don’t know if this is a widely followed convention. Given the highly heterogenous urban mosaic of Mumbai, smaller areas are more meaningful as they represent a consistently designed space. For this reason, I have maintained the 500m bounding box around a central coordinate like the previous posts.\nWithout the street network or parks coloured in, the urban fabric of Dadar Parsi Colony and Ballard Estate appear more similar to each other than to the examples from the Upper West Side and Islington. The famous rectangular blocks of New York City are a stark contrast to the more sinuous blocks of British (local and colonial) urbanism.\n\n\n\n\n\n\n\n\nWhile the more conventional figure-ground diagram ignores the street network [3], the combination of streets and buildings offers more insights - especially when the street widths in the diagram are a tentative approximation of street importance [2]. For example, primary and trunk roads are given the largest widths followed by medium widths for secondary and tertiary roads and light lines for all others. This allows for qualitative analysis of urban mobility like walkability and connectivity overlaid with building densities of residence and / or commerce.\n\n\n\n\n\n\n\n\nOnce again, NYC stands out, compared to the examples of British urbanism, where secondary or tertiary roads surround all blocks. In Islington and Dadar Parsi Colony, two residential neighbourhoods of British design, building blocks are mostly connected by residential roads with arterial connections at least 100m - 200m away.\nThere is much to analyse and understand from these diagrams and I hope to return to them many times over as I fumble my way through the vast literature of urban morphology. I am also trying to figure out how to add scale bars back into the schematics in a visually congruent way - my efforts so far have been too messy for inclusion.\n\nReferences\n\n\n[1] A. B. Jacobs, Great streets, 4. print. Cambridge, Mass.: MIT Pr, 1996.\n\n\n[2] G. Boeing, “Urban Form Figure-Ground Diagrams,” Mar. 02, 2017. https://geoffboeing.com/2017/03/urban-form-figure-ground/ (accessed Mar. 09, 2023).\n\n\n[3] Morphocode, “The figure-ground diagram,” Sep. 25, 2019. https://morphocode.com/figure-ground-diagram/ (accessed Mar. 09, 2023).\n\n\n\n\nCredits\n\nPost photo is a figure-ground map of Giambattista Nolli’s 1748 “Pianta Grande di Roma” copied from https://morphocode.com/figure-ground-diagram/."
  },
  {
    "objectID": "posts/precincts-defn/index.html",
    "href": "posts/precincts-defn/index.html",
    "title": "Precincts - definitions and examples",
    "section": "",
    "text": "References\n\n\n\n\n\nCredits\n\nPost photo from https://www.architecturaldigest.in/story/dadar-parsi-colony-cherishing-the-bombay-that-was-mumbai-history-pictures/"
  },
  {
    "objectID": "posts/bldg-heights-intro/index.html#m-grids-1",
    "href": "posts/bldg-heights-intro/index.html#m-grids-1",
    "title": "A first look at building heights data",
    "section": "90m grids",
    "text": "90m grids\n\n\n\n\n\n\nReferences\n\n\n\n\n\nCredits\nPost photo by Roman Fox on Unsplash"
  },
  {
    "objectID": "posts/bldg-heights-intro/index.html",
    "href": "posts/bldg-heights-intro/index.html",
    "title": "A first look at building heights data",
    "section": "",
    "text": "Building heights are an important indicator for various urban analyses - from population / m\\(^{2}\\) to Floor Area Ratio (FAR). However, getting this data is not easy. Building polygons in OpenStreetMap usually don’t have this attribute unless it was part of a bulk upload and only some cities provide open data of building footprints with heights [1]. With time and skill, a digital elevation model from LIDAR data (or other sources of data) can be used to derive building heights.\nNone of these options are useful for a relative beginner in remote sensing interested in exploring urbanism of the Global South. Enter derived open data from academic papers. Here I look two datasets - average building heights in a 500m grid from [2] and 90m grid from [3]. Both datasets are cropped to the London polygon for further analysis.\nThe supplementary information in [2] provides a Figshare link to download a global dataset of average building heights in a 500 m\\(^{2}\\) grid area. The centre of London and the Canary Wharf areas show heights of 20m - which are considerably lower than the heights of actual buildings (100 - 300m), While this dataset is not useful for analysis pertaining to buildings, it is useful for comparing built-up volumes derived from the average built-up heights as done in the paper. The data could also be useful for demarcating areas with higher proportions of tall buildings vs. medium height vs. single family homes.\nA recent paper by Esch et al. [3] described a methdology for deriving building heights for the established World Settlement Footprints data suite [4]. The higher granularity of this dataset, 90 m\\(^{2}\\), brings grid average heights much closer to real world building heights. However, the visual patterns of urbanisation at a city scale are lost.\n\n\n\n\n\n\n\n\nWe need to zoom in to borough or MSOA (Middle Super Output Area) to better visualise areas with tall buildings. In City of London, we easily see higher granularity of the cluster around Liverpool Street that contains the Shard, the tallest building in London. Similarly, the zoom over the Canary Wharf business cluster shows the spread of areas with many tall buildings over 100m (list here). The value of the grid cell is pretty close to the building heights though not exact as it is still an average and likely that the grid cell doesn’t always overlap fully with the building footprint of a tall building.\n\n\n\n\n\n\nReferences\n\n\n[1] “NYC Building Heights.” https://data.cityofnewyork.us/Housing-Development/Building-Heights/pffy-49n3 (accessed Mar. 18, 2023).\n\n\n[2] Y. Zhou et al., “Satellite mapping of urban built-up heights reveals extreme infrastructure gaps and inequalities in the Global South,” Proc. Natl. Acad. Sci. U.S.A., vol. 119, no. 46, p. e2214813119, Nov. 2022, doi: 10.1073/pnas.2214813119.\n\n\n[3] T. Esch et al., “World Settlement Footprint 3D - A first three-dimensional survey of the global building stock,” Remote Sensing of Environment, vol. 270, p. 112877, Mar. 2022, doi: 10.1016/j.rse.2021.112877.\n\n\n[4] M. Marconcini, A. Metz- Marconcini, T. Esch, and N. Gorelick, “Understanding Current Trends in Global Urbanisation - The World Settlement Footprint Suite,” giforum, vol. 1, pp. 33–38, 2021, doi: 10.1553/giscience2021_01_s33.\n\n\n\n\nCredits\nPost photo by Roman Fox on Unsplash"
  },
  {
    "objectID": "posts/bldg-heights-intro/index.html#m-grid",
    "href": "posts/bldg-heights-intro/index.html#m-grid",
    "title": "A first look at building heights data",
    "section": "500m grid",
    "text": "500m grid\nThe supplementary information in [2] provides a Figshare link to download a global dataset of average building heights in a 500 \\(m^{2}\\) grid area. The centre of London and the Canary Wharf areas show heights of 20m - which are considerably lower than the heights of actual buildings (100 - 300m), While this dataset is not useful for analysis pertaining to buildings, it is useful for comparing built-up volumes derived from the average built-up heights as done in the paper. The data could also be useful for demarcating areas with higher proportions of tall buildings vs. medium height vs. single family homes."
  },
  {
    "objectID": "posts/bldg-heights-intro/index.html#m-grids",
    "href": "posts/bldg-heights-intro/index.html#m-grids",
    "title": "A first look at building heights data",
    "section": "90m grids",
    "text": "90m grids\nThe recent paper by Esch et al. [3] described a methdology for deriving building height enrichments for the established World Settlement Footprints data suite [4]. The higher granularity of this dataset, 90\\(m^{2}\\), brings grid average heights much closer to real world building heights. However, the patterns of urbanisation at a city scale are lost.\n\n\n\n\n\nWe need to do zoom in at a borough or MSOA (Middle Super Output Area) to better visualise areas with tall buildings. In City of London, we easily see the cluster around Liverpool Street that contains the Shard, the tallest building in London. Similarly, we can zoom in to the Canary Wharf business cluster to see a spread of many tall buildings over 100m (list here).\n\n\n\n\n\n\nReferences\n\n\n[1] “NYC Building Heights.” https://data.cityofnewyork.us/Housing-Development/Building-Heights/pffy-49n3 (accessed Mar. 18, 2023).\n\n\n[2] Y. Zhou et al., “Satellite mapping of urban built-up heights reveals extreme infrastructure gaps and inequalities in the Global South,” Proc. Natl. Acad. Sci. U.S.A., vol. 119, no. 46, p. e2214813119, Nov. 2022, doi: 10.1073/pnas.2214813119.\n\n\n[3] T. Esch et al., “World Settlement Footprint 3D - A first three-dimensional survey of the global building stock,” Remote Sensing of Environment, vol. 270, p. 112877, Mar. 2022, doi: 10.1016/j.rse.2021.112877.\n\n\n[4] M. Marconcini, A. Metz- Marconcini, T. Esch, and N. Gorelick, “Understanding Current Trends in Global Urbanisation - The World Settlement Footprint Suite,” giforum, vol. 1, pp. 33–38, 2021, doi: 10.1553/giscience2021_01_s33.\n\n\n\n\nCredits\nPost photo by Roman Fox on Unsplash"
  },
  {
    "objectID": "posts/bldg-heights-footprints/index.html",
    "href": "posts/bldg-heights-footprints/index.html",
    "title": "Overlaying building heights and footprints",
    "section": "",
    "text": "In the previous post, I quickly looked at two options for global building height rasters. The 90m grid from [1] looked more useful option the lower granularity provided more realistic values of real-world building heights. However, finding suitable data is only the first baby step. Figuring out how to calculate derived metrics like Floor Area Ratio (FAR) or population density per built area requires multiple datasets in different formats.\nFAR can be associated with the raster cell (as an average) or the building polygon. To better understand the suitability of the latter approach, I visualise the overlay of the height raster with building polygons for City of London (full boundary) and a portion of Tower Hamlets - around the Canary Wharf area.\nWhen preparing the data for the following maps, I learned a couple of useful tips:\n\nDissolving boundary polygons to the outer boundary needs st_make_valid() after the group by to ensure a clean polygon with no straggling lines within the dissolved polygon.\n\n\nboundaries_sf %&gt;% \n  group_by(`higher boundary name`) %&gt;% \n  st_make_valid() %&gt;%\n  st_union() %&gt;% \n  st_as_sf()\n\n\nUse st_intersection(poly1, poly2) to cleanly crop poly1 to the boundary of poly2.\n\nIn all my previous posts, I’ve stuck with the graphics workhorse, ggplot2. However, in this post I transitioned to the tmap package [2] and I highly recommend it. I am a relatively new user so I still don’t know whether it’s as comprehensive as ggplot2 but so far many of the map conversions have come out considerably better (and with simpler code). Furthermore, tmap has two modes - where the same map can be viewed as static (tmap_mode(\"plot\")) or interactive (tmap_mode(\"view\")).\nNow coming back to the original question of FAR calculation options. The maps show that building polygons are of comparable size or much smaller than the raster cells and both datasets are quite mis-aligned. The building-centric option could be more useful - especially if I also want to associate a population from a raster dataset like WorldPop [3]. I suspect it would be easier to assign a proportion of population to a building than trying to align two raster grids.\n\n\n\n\n\n\nReferences\n\n\n[1] T. Esch et al., “World Settlement Footprint 3D - A first three-dimensional survey of the global building stock,” Remote Sensing of Environment, vol. 270, p. 112877, Mar. 2022, doi: 10.1016/j.rse.2021.112877.\n\n\n[2] M. T. Nowosad Jakub, Elegant and informative maps with tmap. Accessed: Mar. 14, 2023. [Online]. Available: https://r-tmap.github.io/tmap-book/\n\n\n[3] “The spatial distribution of population in 2020 with country total adjusted to match the corresponding UNPD estimate, india,” 2020. https://hub.worldpop.org/geodata/summary?id=49992\n\n\n\n\nCredits\nPost photo by Evgeny Klimenchenko on Unsplash"
  },
  {
    "objectID": "posts/extracting-bldg-heights/index.html",
    "href": "posts/extracting-bldg-heights/index.html",
    "title": "Raster heights to building heights",
    "section": "",
    "text": "The previous post, noted the value of retrieving a summarised height data for a building polygon from the overlaid raster cells. In this post, I look at how the package exactextractr [1], typically used in the calculation of zonal statistics, can make my use case a fast and easy task.\nSince I use stars to read and process raster data, I have an additional step before running the extraction function - converting the stars object to a raster with the st_as_raster() convenience function [2].\n\nst_as_raster &lt;- function(rstars){\n  rext &lt;- st_bbox(rstars)\n  raster(t(rstars[[1]]), xmn = rext[1], xmx = rext[3],\n         ymn = rext[2], ymx=rext[4],\n         crs = st_crs(rstars)$proj4string)\n}\n\nThe exact_extract() function assigns mean, median, minimum etc. values from the raster layer to the polygons. The full set of summary operations can be seen here. I’ve opted for mean and median as summary statistics. At first glance it appears that areas with tall buildings are being captured well e.g. the eastern part of City of London around Liverpool Street station (e.g. the Shard) and the tall buildings in Canary Wharf.\n\n\n\n\n\nHowever, validation tells another story. Since only a small portion of buildings have height values in OpenStreetMap, I’ve used a conversion factor of 3 for deriving heights from building levels to increase the sample size for validation. The differences between raster-summarised heights and actual heights are very high in the Canary Wharf cluster - and there are good reasons for this.\n\nThe grid is 90m but building footprints are typically 20m - 40m.\nVery tall buildings are often surrounded by much smaller buildings or parks making the polygon cell mean and median much lower.\nDepending on the coverage of the raster cell, the height of the very tall building can be associated with a significantly smaller neighbour and vice versa.\n\n\n\n\n\n\nA robust conclusion of the utility of 90m raster heights for building level features needs better validation - across a larger area and a greater proportion of buildings with height values. I ended up picking the whole of the Upper West Side in New York City since 93% of building polygons in the area have non-null heights in OpenStreetMap. Note, I’m assuming OpenStreetMap heights are ground truth (which may not be the case?).\nThe distribution of absolute difference in mean building height from the raster data and the actual heights in OpenStreetMap looks symmetric but strongly biased to summarised raster heights being larger.\n\n\n\n\n\nI’ve split the OpenStreetMap building height into quantiles with a mean height per quantile for a more succinct summary. The table below shows raster summaries from a 90m grid resolution over-estimate for every quantile - with buildings in the 25-75 percentile bands being over-estimated by almost 100%.\n\n\n\n\n\n\nPercentile\nMean height in percentile (m)\nMean height difference (m)\n\n\n\n\n25%\n13.63958\n22.4\n\n\n50%\n17.71011\n14.0\n\n\n75%\n19.37925\n14.0\n\n\n100%\n41.70860\n3.4\n\n\n\n\n\n\n\n\nIn summary, the 90m grid is not a viable data source for accurate building level information. Since the availability of building height information is very poor for the developing world, satellite-derived values are the only way forward. My plan is to look at lower granularity data - starting with 10m grid data for Germany [3] that I will validate with EUBUCCO [4]. If this lower granularity works well, I have a big project coming up - applying the approach of Franz et al. [5] to satellite data from Mumbai!\n\nReferences\n\n\n[1] “Fast extraction from raster datasets using polygons.” https://isciences.gitlab.io/exactextractr/ (accessed Mar. 28, 2023).\n\n\n[2] “Convert stars raster to raster::raster. Gist.” https://gist.github.com/cbrown5/65ac150cb71de8cc6c7923313a2b72f5 (accessed Mar. 28, 2023).\n\n\n[3] D. Frantz et al., “Building height map of germany.” Zenodo, Oct. 05, 2020. doi: 10.5281/zenodo.4066295.\n\n\n[4] N. Milojevic-Dupont et al., “EUBUCCO.” Zenodo, Oct. 20, 2022. doi: 10.5281/ZENODO.6524780.\n\n\n[5] D. Frantz et al., “National-scale mapping of building height using sentinel-1 and sentinel-2 time series,” Remote Sensing of Environment, vol. 252, p. 112128, Jan. 2021, doi: 10.1016/j.rse.2020.112128.\n\n\n\n\nCredits\nPost photo by Simone Hutsch on Unsplash"
  },
  {
    "objectID": "essays/reasons-urban-morphology/index.html",
    "href": "essays/reasons-urban-morphology/index.html",
    "title": "Reasons to study urban morphology",
    "section": "",
    "text": "The design and structure of urban areas have a significant impact on our daily lives and overall well-being. Urban form, which includes the layout and connectivity of space, plays a crucial role in determining how people move, interact, and transact. Spatial organisation governs 60 - 80% of movement patterns [1], making it vital for economic prosperity and individual well-being. However, urban form also generates negative outcomes - with crimes like burglaries in poorly connected areas and pickpocketing thriving in highly connected areas [1].\nIt is essential for policymakers to understand the spatial characteristics of urban areas and how they pertain to safety, efficiency, and utility. Without this understanding, it is difficult to bring about meaningful change through state intervention or market forces. Since urban transformation builds upon existing layers, what exists is an important determinant of what more it could be.\n\n.. waves of change rarely start from scratch. More commonly, they are added in a layered way. Over time, each phase, each change blends in with the rest of the urban fabric to give a city its uniquely distinct pattern that defines it almost as a strand of DNA.\n\n– Excerpt from Arribas-bel et al. [2]\nThe challenges of inefficient or unsafe urban layout are especially poignant for developing countries. Many rural denizens have migrated from their ancestral homes to crowded cities and towns over the last few decades. The migration will continue with a projected increase to 68% urban population by 2050 (relative to 55% in 2018) - with 90% of the increase taking place in Asia and Africa [3].\nMy interests lie in the unique challenges facing the Indian subcontinent. The inefficiency in spatial layout propagates large disparities in quality of life for the urban poor - many of whom are rural migrants. Indian cities are mainly private open space with draconian regulations governing development [4]. Even though older examples of urban design in places like Mumbai have more public land, they still have too much land in the private domain that cannot be built upon [4].\nThe present-day issues of urban form require study, consideration and deliberation before re-design and mitigation. Tensions abound in handling slums, creating accessible public amenities as well as the dilemma between conserving historical precincts vs. re-development.\nThrowing many people towards these challenges is the only way we can build a better place for all. We need policymakers, scientists and citizens working collaboratively and openly while making the fruits of their efforts open for comment and criticism.\n\nTwo heads are better than one, not because either is infallible, but because they are unlikely to go wrong in the same direction.\n\n– Quote from C.S Lewis\nI’m hopeful that this blog, through its quantitative explorations of cities with open data and open source tools, is one such drip in the ocean of work yet to do. Even if it is not useful to anyone, these efforts will at least make me a more capable citizen with the requisite skills and understanding to work in urban development.\n\nReferences\n\n\n[1] T. Stonor, “Spatial Layout Efficiency with Tim Stonor of Space Syntax - YouTube.” https://www.youtube.com/watch?v=_MBZhNAaZL4 (accessed Mar. 19, 2022).\n\n\n[2] D. Arribas-Bel and M. Fleischmann, “Spatial Signatures - Understanding (urban) spaces through form and function,” Habitat International, vol. 128, p. 102641, Oct. 2022, doi: 10.1016/j.habitatint.2022.102641.\n\n\n[3] U. Nations, “68% of the world population projected to live in urban areas by 2050, says UN.” https://www.un.org/en/desa/68-world-population-projected-live-urban-areas-2050-says-un (accessed Apr. 14, 2023).\n\n\n[4] “Alain Bertaud, Bimal Patel, Vidyadhar Phatak on Improving Indian Urban Planning - YouTube.” https://www.youtube.com/watch?v=A0_qAk_obLE (accessed Aug. 06, 2022).\n\n\n\n\nCredits\n\nPost photo from Marlin Clark on Unsplash"
  }
]